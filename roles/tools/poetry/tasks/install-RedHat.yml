---
# @action: Revisit at a later point once support for Python 3.10 is added to Poetry and remove
# this step, and the step in `install-Linux.yml` where the poetry script is updated to use 3.9
# version of Python
- name: Ensure Python 3.9 is installed
  dnf:
    name: "{{ 'python3.9' if ansible_distribution != 'Fedora' else 'python39' }}"
    state: present

- name: Run generic installation tasks
  include_tasks: install-Linux.yml
  loop: "{{ user_configs }}"
  loop_control:
    label: "{{ user.username }}"
    loop_var: user
  when: (user.system is not defined) or ((user.system is defined) and (not user.system))
